name: Deploy list_runtimes function

on:
  workflow_dispatch:

jobs:
  deploy-function-list-runtimes:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - name: Authenticate to Google Cloud
        uses: google-github-actions/auth@v3
        with:
          project_id: ${{ secrets.GCP_PROJECT_ID }}
          credentials_json: ${{ secrets.GCP_CREDENTIALS }}
      - name: Set up Cloud SDK
        uses: google-github-actions/setup-gcloud@v3
      - run: gcloud functions deploy list_runtimes --gen2 --entry-point listRuntimes --trigger-http --runtime nodejs22 --allow-unauthenticated --memory 8192MB --region europe-west1 --source functions/list_runtimes --service-account list-function-groovy-runtimes@gwc-experiment.iam.gserviceaccount.com
